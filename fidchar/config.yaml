# Charitable Donation Analysis Configuration

# Input data file path (relative to where you run the command)
input_file: "data.csv"

sections:
  - name: exec
    # Executive Summary - two summary cards at the top
    show_one_time: false       # Show One-Time Donations card
    show_stopped: false        # Show Stopped Recurring card
    include: true             

  # Example: flat structure (no "options:" wrapper)
  - name: sectors
    # Donation Analysis by Charitable Sector
    show_percentages: true
    include: true

  # Yearly Donation Analysis
  - name: yearly
    options:
      include_charts: true
      include: false

# Charities by Total Donations
  - name: top_charities
    max_shown: 20  # Limit the number of charities shown (omit to show all)
    include: false

# Combined Recurring Charities - includes both rule-based and CSV-based with Source column
# Example: flat structure (alternative to nested "options:")
  - name: combined_recurring
    max_shown: 40
    include: false

# All Charities - comprehensive list with CSV/Rule indicators, years, current year amount
  - name: all_charities
    include: true
    max_shown: 60


# High-alignment charities that aren't recurring - potential recurring donation candidates
  - name: high_alignment_opportunities
    min_alignment_score: 80  # Minimum alignment score (default: 80)
    max_shown: 40  # Omit to show all
    include: true

  - name: remaining
    # Remaining Charities - multi-year, multi-donation but not recurring
    options:
      max_remaining_shown: 100
      include: false

  - name: patterns
    # One-Time vs Recurring Donation Patterns
    options:
      max_one_time_shown: 100
      max_stopped_shown:  100
      include: false
    
  # Detailed Analysis of Charities
  - name: detailed
    include_descriptions: true
    max_shown: 60  # Limit the number of charity detail cards (omit to show all)
    include: true

  - name: definitions
  #  Definitions of terms used in the report
    options:
      include: false           # Uncomment to suppress this section


# Output directory (relative to where you run the command)
output_dir: "output"

# Charapi configuration path (for charity evaluations)
charapi_config_path: "/Users/pitosalas/mydev/charapi/charapi/config/config.yaml"

# Charities filtering and sorting configuration
charities_sort: "alpha"  # Sort order: "alpha" (alphabetical) or "total_grant" (by donation amount)
charities_min_grant: 1000  # Minimum total donation amount to be included

# Recurring charity determination - two methods available
recurring_charity:
  # Pattern-based: Analyze YOUR donation history over multiple years
  pattern_based:s
    enabled: true
    count: 15           # Look at last 15 years
    min_years: 6        # Must have donated in at least 6 of those years
    min_amount: 1000    # Each qualifying year must have >= $1000 in donations

  # CSV field-based: Use Fidelity's "Recurring" designation from the CSV
  csv_field_based:
    enabled: true

# Optional: Export charity data to CSV for external processing
export_csv:
  enabled: true  # Set to true to enable CSV export
  output_file: "output/charity_export.csv"

# For consideration criteria (charities to include in detailed analysis even if not in top N)
# These charities meet quality thresholds and warrant consideration
for_consideration:
  enabled: false  # DISABLED - using min_grant filter instead
  min_alignment_score: 70        # Minimum alignment score (0-100)
  min_evaluation_score: 70       # Minimum evaluation score (0-100, based on outstanding/acceptable metrics)
